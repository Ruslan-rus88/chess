* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  padding: 20px;
}

.game-container {
  max-width: 1200px;
  margin: 0 auto;
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

.game-header {
  text-align: center;
  margin-bottom: 30px;
}

.game-header h1 {
  font-size: 3em;
  color: #333;
  margin-bottom: 20px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.tabs {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 20px;
}

.tab-button {
  padding: 12px 30px;
  background: #e0e0e0;
  color: #333;
  border: none;
  border-radius: 8px 8px 0 0;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: bold;
  transition: all 0.3s ease;
  border-bottom: 3px solid transparent;
}

.tab-button:hover {
  background: #d0d0d0;
}

.tab-button.active {
  background: #fff;
  color: #667eea;
  border-bottom-color: #667eea;
  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
}

.game-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
}

.current-player {
  font-size: 1.3em;
  font-weight: bold;
  color: #444;
}

#current-player {
  color: #8b4513;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
}

.game-status {
  font-size: 1.1em;
  color: #666;
  font-style: italic;
}

.reset-button {
  padding: 12px 24px;
  background: #4caf50;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: bold;
  transition: all 0.3s ease;
}

.reset-button:hover {
  background: #45a049;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
.button-group {
  position: relative;
  display: flex;
  gap: 15px;
  align-items: center;
  flex-wrap: wrap;
}

.fullscreen-button {
  padding: 12px 24px;
  background: #2196f3;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: bold;
  transition: all 0.3s ease;
}

.fullscreen-button:hover {
  background: #1976d2;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.fullscreen-button:active {
  transform: translateY(0);
}

.settings-toggle-btn {
  padding: 12px 20px;
  background: #6c757d;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.4em;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.settings-toggle-btn:hover {
  background: #5a6268;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.settings-toggle-btn:active {
  transform: translateY(0);
}

/* Settings Panel */
.settings-panel {
  position: relative;
  text-align: center;
  margin-bottom: 20px;
}

.settings-content {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 10px;
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  grid-template-columns: 1fr;
  gap: 15px;
  z-index: 1000;
  min-width: 280px;
  border: 2px solid #e0e0e0;
}

.settings-content.active {
  display: grid;
}

.setting-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.setting-group label {
  font-weight: bold;
  color: #555;
  font-size: 1em;
}

.setting-select {
  padding: 8px 12px;
  border: 2px solid #ddd;
  border-radius: 6px;
  background: white;
  font-size: 1em;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 150px;
}

.setting-select:hover {
  border-color: #007bff;
}

.setting-select:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
}

.chess-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  gap: 10px;
  margin: 30px 0;
  /* Ensure proper alignment of board and labels */
}

.board-labels {
  display: flex;
  flex-direction: column;
  gap: 0;
  /* Ensure labels align perfectly with board squares */
  align-items: center;
  justify-content: center;
}

.rank-label,
.file-label {
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.1em;
  color: #666;
  /* Ensure perfect alignment with board squares */
  box-sizing: border-box;
  line-height: 1;
  margin: 0;
  padding: 0;
}

.chess-board-container {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.chess-board {
  display: grid;
  grid-template-columns: repeat(8, 50px);
  grid-template-rows: repeat(8, 50px);
  border: 3px solid #8b4513;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  /* Add perspective for 3D pieces */
  transform-style: preserve-3d;
  perspective: 1000px;
}

.square {
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: relative;
  transition: all 0.3s ease;
  /* Enable 3D transforms for pieces */
  transform-style: preserve-3d;
}

.square.light {
  background-color: #f0d9b5;
}

.square.dark {
  background-color: #b58863;
}

.square:hover {
  transform: scale(1.05);
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
  z-index: 2;
}

.square.selected {
  background-color: #ffeb3b !important;
  box-shadow: 0 0 15px rgba(255, 235, 59, 0.8);
  z-index: 3;
}

.square.possible-move {
  background-color: rgba(76, 175, 80, 0.5) !important;
}

.square.possible-capture {
  background-color: rgba(244, 67, 54, 0.5) !important;
}

.square.last-move {
  background-color: rgba(255, 193, 7, 0.6) !important;
}

.piece {
  font-size: 2.2em;
  cursor: pointer;
  user-select: none;
  transition: all 0.3s ease;
  position: relative;
  z-index: 1;
  display: inline-block;
  transform-style: preserve-3d;
  /* Enhanced 3D effect using multiple shadows and transforms */
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.9), 1px 1px 1px rgba(0, 0, 0, 0.8),
    2px 2px 3px rgba(0, 0, 0, 0.6), 3px 3px 5px rgba(0, 0, 0, 0.4),
    4px 4px 7px rgba(0, 0, 0, 0.3), 5px 5px 9px rgba(0, 0, 0, 0.2),
    0 0 12px rgba(0, 0, 0, 0.15);
  transform: translateZ(2px) rotateX(8deg) rotateY(-2deg);
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.4))
    drop-shadow(4px 4px 8px rgba(0, 0, 0, 0.2));
  will-change: transform;
}

.piece:hover {
  transform: translateZ(15px) rotateX(8deg) rotateY(-2deg) scale(1.15);
  filter: drop-shadow(3px 3px 6px rgba(0, 0, 0, 0.5))
    drop-shadow(6px 6px 12px rgba(0, 0, 0, 0.3));
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.9), 1px 1px 1px rgba(0, 0, 0, 0.8),
    2px 2px 3px rgba(0, 0, 0, 0.6), 3px 3px 5px rgba(0, 0, 0, 0.4),
    4px 4px 7px rgba(0, 0, 0, 0.3), 5px 5px 9px rgba(0, 0, 0, 0.2),
    6px 6px 11px rgba(0, 0, 0, 0.15), 0 0 18px rgba(0, 0, 0, 0.2);
}

.piece.dragging {
  opacity: 0.8;
  transform: scale(1.3);
  z-index: 1000;
  pointer-events: none;
}

.file-labels {
  display: flex;
  gap: 0;
  margin-top: 5px;
  /* Ensure labels align perfectly with board columns */
  justify-content: center;
  align-items: center;
}

.captured-pieces {
  display: flex;
  justify-content: space-around;
  margin-top: 30px;
  gap: 40px;
}

.captured-white,
.captured-black {
  flex: 1;
  text-align: center;
}

.captured-pieces h3 {
  margin-bottom: 15px;
  color: #333;
  font-size: 1.3em;
}

.pieces-container {
  min-height: 60px;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 10px;
  padding: 10px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 5px;
}

.captured-piece {
  font-size: 1.8em;
  opacity: 0.7;
  /* Apply 3D effect to captured pieces too */
  transform-style: preserve-3d;
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.9), 1px 1px 1px rgba(0, 0, 0, 0.8),
    2px 2px 3px rgba(0, 0, 0, 0.6), 3px 3px 5px rgba(0, 0, 0, 0.4);
  transform: translateZ(2px) rotateX(8deg) rotateY(-2deg);
  display: inline-block;
  filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.3));
}

.modal {
  display: none;
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideIn {
  from {
    transform: translateY(-50px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes bounce {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateY(0) scale(1);
  }
  40% {
    transform: translateY(-20px) scale(1.1);
  }
  60% {
    transform: translateY(-10px) scale(1.05);
  }
}

@keyframes rotate {
  from {
    transform: rotate(0deg) scale(0);
  }
  to {
    transform: rotate(360deg) scale(1);
  }
}

.modal-content {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  margin: 10% auto;
  padding: 40px;
  border-radius: 20px;
  width: 450px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  animation: slideIn 0.5s ease;
}

.winner-image {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  border: 5px solid #ffd700;
  object-fit: cover;
  margin: 0 auto 20px;
  box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
  animation: rotate 0.8s ease, bounce 1s ease 0.8s;
}

.modal-content h2 {
  color: #fff;
  margin-bottom: 20px;
  font-size: 2.5em;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  animation: slideIn 0.6s ease 0.2s both;
}

.modal-content p {
  color: #f0f0f0;
  font-size: 1.3em;
  margin-bottom: 30px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
  animation: slideIn 0.7s ease 0.4s both;
}

.modal-button {
  padding: 15px 40px;
  background: #fff;
  color: #667eea;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  font-size: 1.2em;
  font-weight: bold;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  animation: slideIn 0.8s ease 0.6s both;
}

.modal-button:hover {
  background: #ffd700;
  color: #333;
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
}

/* Chess piece Unicode symbols styling */
.white-piece {
  color: #ffffff;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

.black-piece {
  color: #2c2c2c;
  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
}

/* Responsive design */
@media (max-width: 768px) {
  .game-container {
    padding: 15px;
  }

  .game-header h1 {
    font-size: 2em;
  }

  .game-info {
    flex-direction: column;
    gap: 10px;
  }

  .chess-container {
    flex-direction: column;
    gap: 10px;
  }

  .board-labels.left-labels {
    order: 2;
    flex-direction: row;
  }

  .chess-board {
    grid-template-columns: repeat(8, 40px);
    grid-template-rows: repeat(8, 40px);
  }

  .square,
  .rank-label,
  .file-label {
    width: 40px;
    height: 40px;
  }

  .piece {
    font-size: 1.8em;
  }

  .captured-pieces {
    flex-direction: column;
    gap: 20px;
  }

  /* Player Selection Mobile */
  .player-selection {
    padding: 15px;
    margin-bottom: 20px;
  }

  .player-selection h3 {
    font-size: 1.5em;
    margin-bottom: 20px;
  }

  .players-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .vs-divider {
    font-size: 2em;
    text-align: center;
    margin: 10px 0;
  }

  .player-setup {
    width: 100%;
  }

  .player-setup h4 {
    font-size: 1.2em;
    margin-bottom: 15px;
  }

  .player-options {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .player-option {
    padding: 10px;
  }

  .player-option img {
    width: 60px;
    height: 60px;
    margin-bottom: 5px;
  }

  .player-option span {
    font-size: 0.9em;
  }

  .selected-player {
    min-height: 70px;
    padding: 10px;
  }

  .selected-player img {
    width: 40px;
    height: 40px;
    margin-bottom: 5px;
  }

  .start-game-button {
    padding: 12px 30px;
    font-size: 1.2em;
    margin-top: 20px;
  }

  .current-player-info {
    font-size: 1.1em;
  }

  .current-player-display img {
    width: 35px;
    height: 35px;
  }

  .button-group {
    flex-direction: column;
    gap: 10px;
    width: 100%;
  }

  .reset-button,
  .fullscreen-button {
    width: 100%;
    padding: 10px 20px;
    font-size: 1em;
  }

  .settings-content {
    grid-template-columns: 1fr;
    gap: 10px;
  }
}

/* Color Themes */
.theme-blue .square.light {
  background-color: #e3f2fd;
}
.theme-blue .square.dark {
  background-color: #1976d2;
}
.theme-blue .piece.white-piece {
  color: #ffd700;
}
.theme-blue .piece.black-piece {
  color: #0d47a1;
}

.theme-green .square.light {
  background-color: #f1f8e9;
}
.theme-green .square.dark {
  background-color: #388e3c;
}
.theme-green .piece.white-piece {
  color: #fffde7;
}
.theme-green .piece.black-piece {
  color: #1b5e20;
}

.theme-purple .square.light {
  background-color: #f3e5f5;
}
.theme-purple .square.dark {
  background-color: #7b1fa2;
}
.theme-purple .piece.white-piece {
  color: #e1bee7;
}
.theme-purple .piece.black-piece {
  color: #4a148c;
}

.theme-red .square.light {
  background-color: #ffebee;
}
.theme-red .square.dark {
  background-color: #c62828;
}
.theme-red .piece.white-piece {
  color: #ffffff;
}
.theme-red .piece.black-piece {
  color: #b71c1c;
}

/* Board Styles */
.board-wood .square.light {
  background-color: #deb887;
  background-image: radial-gradient(
    circle at 25% 25%,
    rgba(222, 184, 135, 0.8) 0%,
    transparent 50%
  );
}
.board-wood .square.dark {
  background-color: #8b4513;
  background-image: radial-gradient(
    circle at 25% 25%,
    rgba(139, 69, 19, 0.8) 0%,
    transparent 50%
  );
}

.board-marble .square.light {
  background-color: #f8f8ff;
  background-image: linear-gradient(
    45deg,
    rgba(220, 220, 220, 0.3) 25%,
    transparent 25%
  );
}
.board-marble .square.dark {
  background-color: #2f4f4f;
  background-image: linear-gradient(
    45deg,
    rgba(47, 79, 79, 0.8) 25%,
    transparent 25%
  );
}

.board-neon .square.light {
  background-color: #000011;
  border: 1px solid #00ff88;
  box-shadow: inset 0 0 5px rgba(0, 255, 136, 0.3);
}
.board-neon .square.dark {
  background-color: #001122;
  border: 1px solid #ff0088;
  box-shadow: inset 0 0 5px rgba(255, 0, 136, 0.3);
}
.board-neon .piece {
  text-shadow: 0 0 10px currentColor;
}

/* Fullscreen Mode */
.game-container.fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  max-width: none;
  margin: 0;
  padding: 20px;
  border-radius: 0;
  z-index: 3000;
  background: rgba(255, 255, 255, 0.98);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.game-container.fullscreen .chess-board {
  grid-template-columns: repeat(8, 80px);
  grid-template-rows: repeat(8, 80px);
}

.game-container.fullscreen .square {
  width: 80px;
  height: 80px;
}

.game-container.fullscreen .rank-label,
.game-container.fullscreen .file-label {
  width: 80px;
  height: 80px;
  font-size: 1.4em;
}

.game-container.fullscreen .piece {
  font-size: 3.5em;
}

.game-container.fullscreen .settings-panel {
  display: none;
}

/* Player Selection */
.player-selection {
  margin-bottom: 30px;
  padding: 25px;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 15px;
  border: 2px solid #e0e0e0;
}

.player-selection h3 {
  text-align: center;
  color: #333;
  margin-bottom: 25px;
  font-size: 1.8em;
}

.players-container {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 30px;
  align-items: center;
}

.player-setup {
  text-align: center;
}

.player-setup h4 {
  color: #555;
  margin-bottom: 20px;
  font-size: 1.3em;
}

.player-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-bottom: 20px;
}

.player-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 15px;
  border: 3px solid transparent;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  /* Prevent layout shift by maintaining consistent dimensions */
  box-sizing: border-box;
}

.player-option:hover {
  border-color: #007bff;
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  /* Ensure border doesn't cause shift - use box-shadow inset for visual effect */
  border-width: 3px;
}

.player-option.selected {
  border-color: #28a745;
  background: rgba(40, 167, 69, 0.1);
  transform: translateY(-3px);
}

.player-option.disabled {
  opacity: 0.4;
  filter: grayscale(0.4);
  pointer-events: none;
}

.player-option img {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 8px;
  border: 2px solid #ddd;
  transition: all 0.3s ease;
  /* Prevent layout shift by maintaining consistent border width */
  box-sizing: border-box;
  display: block;
}

.player-option:hover img,
.player-option.selected img {
  border-color: #007bff;
  /* Keep border width consistent to prevent shift */
  border-width: 2px;
}

.player-option.selected img {
  border-color: #28a745;
  border-width: 2px;
}

.player-option span {
  font-weight: bold;
  color: #333;
  font-size: 1em;
}

.vs-divider {
  font-size: 2.5em;
  font-weight: bold;
  color: #666;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

.selected-player {
  padding: 15px;
  border: 2px dashed #ccc;
  border-radius: 10px;
  height: 110px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.5);
  transition: border-color 0.3s ease, border-style 0.3s ease,
    background 0.3s ease;
}

.selected-player.has-player {
  border-color: #28a745;
  border-style: solid;
  background: rgba(40, 167, 69, 0.1);
}

.selected-player img {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 8px;
  border: 2px solid #28a745;
}

.selected-player span {
  font-weight: bold;
  color: #333;
}

.start-game-button {
  display: block;
  margin: 25px auto 0;
  padding: 15px 40px;
  background: #28a745;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.3em;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
}

.start-game-button:hover {
  background: #218838;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

.current-player-info {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.3em;
  font-weight: bold;
  color: #444;
}

.current-player-display {
  display: flex;
  align-items: center;
  gap: 8px;
}

.current-player-display img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #8b4513;
}

.game-container.fullscreen .player-selection {
  display: none;
}

/* Responsive design */
@media (max-width: 768px) {
  .game-container {
    padding: 15px;
  }

  .game-header h1 {
    font-size: 2em;
  }

  .game-info {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
  }

  .button-group {
    flex-direction: column;
    width: 100%;
  }

  .reset-button,
  .fullscreen-button {
    width: 100%;
  }

  .chess-container {
    flex-direction: column;
    gap: 12px;
  }

  .board-labels.left-labels {
    order: 2;
    flex-direction: row;
    justify-content: center;
    /* Ensure proper alignment in mobile view */
    align-items: center;
  }

  .chess-board {
    grid-template-columns: repeat(8, 40px);
    grid-template-rows: repeat(8, 40px);
  }

  .square,
  .rank-label,
  .file-label {
    width: 40px;
    height: 40px;
  }

  .piece {
    font-size: 1.8em;
  }

  .captured-pieces {
    flex-direction: column;
    gap: 16px;
  }

  .settings-content {
    grid-template-columns: 1fr;
  }

  /* Player selection */
  .player-selection {
    padding: 18px;
  }

  .players-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .vs-divider {
    font-size: 2em;
    text-align: center;
  }

  .player-setup {
    width: 100%;
  }

  .player-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .player-option {
    width: 100%;
    max-width: 320px;
    margin: 0 auto;
  }

  .selected-player {
    width: 100%;
    max-width: 320px;
    margin: 0 auto;
  }

  .start-game-button {
    width: 100%;
  }

  .current-player-info {
    justify-content: center;
  }
}

/* Lessons Tab Styles */
.lessons-container {
  padding: 20px;
}

.lessons-container h2 {
  text-align: center;
  color: #333;
  margin-bottom: 30px;
  font-size: 2em;
}

.lessons-content {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
  align-items: flex-start;
}

.piece-selector {
  flex: 0 0 300px;
  background: rgba(0, 0, 0, 0.02);
  padding: 20px;
  border-radius: 15px;
  border: 2px solid #e0e0e0;
}

.piece-selector h3 {
  color: #333;
  margin-bottom: 20px;
  font-size: 1.5em;
  text-align: center;
}

.piece-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-bottom: 20px;
}

.lesson-piece-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 15px;
  border: 3px solid transparent;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  background: white;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  /* Prevent layout shift by maintaining consistent dimensions */
  box-sizing: border-box;
}

.lesson-piece-option:hover {
  border-color: #007bff;
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  /* Ensure border doesn't cause shift - use box-shadow inset for visual effect */
  border-width: 3px;
}

.lesson-piece-option:hover .lesson-piece {
  transform: translateZ(15px) rotateX(8deg) rotateY(-2deg) scale(1.15);
  filter: drop-shadow(3px 3px 6px rgba(0, 0, 0, 0.5))
    drop-shadow(6px 6px 12px rgba(0, 0, 0, 0.3));
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.9), 1px 1px 1px rgba(0, 0, 0, 0.8),
    2px 2px 3px rgba(0, 0, 0, 0.6), 3px 3px 5px rgba(0, 0, 0, 0.4),
    4px 4px 7px rgba(0, 0, 0, 0.3), 5px 5px 9px rgba(0, 0, 0, 0.2),
    6px 6px 11px rgba(0, 0, 0, 0.15), 0 0 18px rgba(0, 0, 0, 0.2);
}

.lesson-piece-option.selected {
  border-color: #28a745;
  background: rgba(40, 167, 69, 0.1);
  transform: translateY(-3px);
  border-width: 3px;
}

.lesson-piece {
  font-size: 3em;
  margin-bottom: 8px;
  user-select: none;
  display: inline-block;
  transform-style: preserve-3d;
  /* Enhanced 3D effect using multiple shadows and transforms - same as regular pieces */
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.9), 1px 1px 1px rgba(0, 0, 0, 0.8),
    2px 2px 3px rgba(0, 0, 0, 0.6), 3px 3px 5px rgba(0, 0, 0, 0.4),
    4px 4px 7px rgba(0, 0, 0, 0.3), 5px 5px 9px rgba(0, 0, 0, 0.2),
    0 0 12px rgba(0, 0, 0, 0.15);
  transform: translateZ(2px) rotateX(8deg) rotateY(-2deg);
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.4))
    drop-shadow(4px 4px 8px rgba(0, 0, 0, 0.2));
  will-change: transform;
  transition: all 0.3s ease;
}

.lesson-piece-option span {
  font-weight: bold;
  color: #333;
  font-size: 0.9em;
  text-align: center;
}

.clear-board-button {
  width: 100%;
  padding: 12px 24px;
  background: #dc3545;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: bold;
  transition: all 0.3s ease;
}

.clear-board-button:hover {
  background: #c82333;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.lessons-board-container {
  flex: 1;
  min-width: 400px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.lesson-instructions {
  margin-top: 20px;
  padding: 20px;
  background: rgba(0, 0, 0, 0.02);
  border-radius: 10px;
  border: 2px solid #e0e0e0;
  max-width: 500px;
}

.lesson-instructions p {
  margin: 10px 0;
  color: #555;
  font-size: 1.1em;
  line-height: 1.6;
}

.lesson-instructions p:first-child {
  margin-top: 0;
}

.lesson-instructions p:last-child {
  margin-bottom: 0;
}

@media (max-width: 768px) {
  .tabs {
    flex-direction: column;
    gap: 5px;
  }

  .tab-button {
    border-radius: 8px;
    border-bottom: 3px solid transparent;
  }

  .tab-button.active {
    border-bottom-color: #667eea;
  }

  .lessons-content {
    flex-direction: column;
  }

  .piece-selector {
    flex: 1;
    width: 100%;
  }

  .piece-options {
    grid-template-columns: repeat(3, 1fr);
  }

  .lessons-board-container {
    width: 100%;
    min-width: auto;
  }
}
